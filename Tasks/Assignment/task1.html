<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style></style>
</head>
<body>
    <div id="task">
        <h2>TO DO List</h2>
        <label for="addt">Task:</label>
        <input type="text" name="Add Task" id="t">
        <button id="adt">Add </button>
        <ul id="tasklist">      
        </ul> 
    </div>
    <script>
        const a = document.getElementById("t");
        const b = document.getElementById("adt");
        const c = document.getElementById("tasklist");
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        tasks.forEach(task =>  addTaskToDOM(task));
        function addtask(){
            const tasktext = a.value.trim();
            const task = {id:Date.now(),text: tasktext};
            tasks.push(task);
            addTaskToDOM(task);
            saveTask();
            a.value='';
        }
        function addTaskToDOM(task){
            const l = document.createElement("li");
            l.dataset.id = task.id;
            const s = document.createElement('span');
            s.textContent = task.text;
            const edit = document.createElement('button');
            edit.textContent = 'Edit';
            edit.onclick = () => editTask(task.id,s);
            const delE = document.createElement('button');
            delE.textContent = 'Delete';
            delE.onclick = () => delTask(task.id,l);
            l.appendChild(s);
            l.appendChild(edit);
            l.appendChild(delE);
            c.appendChild(l);
        }

        function editTask(id,s){
            const newTex = prompt("Edit Task:",s.textContent);
            if(newTex === null)return;
            s.textContent = newTex;
            const task = tasks.find(p =>p.id === id);
            task.text = newTex;
            saveTask();

        }
        function saveTask(){
            localStorage.setItem('tasks',JSON.stringify(tasks));
        }
        function delTask(id,l){
            c.removeChild(l);
            tasks = tasks.filter(t => t.id !== id);
            saveTask();
        }
        b.addEventListener("click",addtask);
        a.addEventListener("keypress",(e)=>{
            if(e.key ==="Enter") addtask();
        });
        
    </script>
</body>
</html>